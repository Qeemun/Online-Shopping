<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>销售产品日志 - 在线购物平台</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/unified-dashboard.css">
    <link rel="stylesheet" href="css/salesProductLog.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <header>
        <div class="logo">
            <a href="index.html">在线购物平台</a>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">首页</a></li>
                <li id="cart-link" style="display: none;"><a href="cart.html">购物车</a></li>
                <li id="order-history-link" style="display: none;"><a href="orderHistory.html">订单历史</a></li>
                <li id="admin-link" style="display: none;"><a href="dashboard.html">管理面板</a></li>
                <li id="login-link"><a href="login.html">登录</a></li>
                <li id="register-link"><a href="register.html">注册</a></li>
                <li id="username" class="username"></li>
                <li><button id="logout-button" style="display: none;">退出</button></li>
            </ul>
        </nav>
    </header>

    <div class="dashboard-container">
        <aside class="sidebar">
            <h3>销售管理</h3>
            <ul class="sidebar-menu">
                <li><a href="dashboard.html"><span class="icon">📊</span> 控制面板</a></li>
                <li><a href="productSalesMonitor.html"><span class="icon">📈</span> 销售监控</a></li>
                <li class="active"><a href="salesProductLog.html"><span class="icon">📋</span> 产品日志</a></li>
                <li id="sales-staff-mgmt" style="display: none;"><a href="salesStaffManagement.html"><span class="icon">👥</span> 销售人员管理</a></li>
                <li id="product-cat-mgmt" style="display: none;"><a href="productCategoryManagement.html"><span class="icon">🗂️</span> 商品类别管理</a></li>
                <li id="order-mgmt" style="display: none;"><a href="orderManagement.html"><span class="icon">📦</span> 订单管理</a></li>
                <li id="customer-mgmt" style="display: none;"><a href="customerManagement.html"><span class="icon">👤</span> 客户管理</a></li>
                <li id="reports-link" style="display: none;"><a href="reports.html"><span class="icon">📝</span> 销售报表</a></li>
                <li id="operation-logs" style="display: none;"><a href="operationLogs.html"><span class="icon">🔍</span> 操作日志</a></li>
            </ul>
            <div class="sidebar-footer">
                <p>&copy; 2025 在线购物平台</p>
            </div>
        </aside>

        <main class="main-content">
            <div class="page-header">
                <h1>产品日志查询</h1>
                <p class="breadcrumb">首页 / 销售管理 / 产品日志</p>
            </div>

            <div class="content-wrapper">
                <div class="filter-panel">
                    <div class="filter-header">
                        <h2>过滤条件</h2>
                        <button id="toggle-filters" class="toggle-btn">▼</button>
                    </div>
                    <div id="filter-content" class="filter-content">
                        <form id="log-filter-form">
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="log-type">日志类型</label>
                                    <select id="log-type" name="log-type">
                                        <option value="all" selected>全部日志</option>
                                        <option value="view">浏览记录</option>
                                        <option value="purchase">购买记录</option>
                                    </select>
                                </div>
                                <div class="filter-item date-range">
                                    <label>日期范围</label>
                                    <div class="date-inputs">
                                        <input type="date" id="start-date" name="start-date">
                                        <span>至</span>
                                        <input type="date" id="end-date" name="end-date">
                                    </div>
                                </div>
                            </div>
                            <div class="filter-row">
                                <div class="filter-item">
                                    <label for="product-category">商品类别</label>
                                    <select id="product-category" name="product-category">
                                        <option value="all" selected>全部类别</option>
                                        <!-- 类别将通过JS动态加载 -->
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label for="product">商品名称</label>
                                    <select id="product" name="product">
                                        <option value="all" selected>全部商品</option>
                                        <!-- 商品将通过JS动态加载 -->
                                    </select>
                                </div>
                                <div class="filter-actions">
                                    <button type="submit" class="primary-btn">搜索</button>
                                    <button type="reset" class="secondary-btn">重置</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="tabs-container">
                    <div class="tabs">
                        <div class="tab active" data-tab="view-logs">浏览日志</div>
                        <div class="tab" data-tab="purchase-logs">购买日志</div>
                    </div>
                    
                    <div class="tab-content active" id="view-logs">
                        <div class="logs-container">
                            <h3>商品浏览记录</h3>
                            <div class="logs-stats">
                                <div class="stat-card">
                                    <div class="stat-value" id="total-views">0</div>
                                    <div class="stat-label">总浏览次数</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="unique-users-view">0</div>
                                    <div class="stat-label">独立用户数</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="avg-view-time">0秒</div>
                                    <div class="stat-label">平均停留时间</div>
                                </div>
                            </div>
                            <div class="table-container">
                                <table class="data-table" id="view-logs-table">
                                    <thead>
                                        <tr>
                                            <th>用户ID</th>
                                            <th>用户名</th>
                                            <th>商品</th>
                                            <th>类别</th>
                                            <th>停留时间</th>
                                            <th>浏览时间</th>
                                            <th>IP地址</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 浏览日志将通过JS动态加载 -->
                                    </tbody>
                                </table>
                                <div class="loading-indicator" id="view-logs-loading">加载中...</div>
                                <div class="empty-message" id="view-logs-empty">没有符合条件的浏览记录</div>
                            </div>
                            <div class="pagination" id="view-logs-pagination">
                                <!-- 分页控件将通过JS动态加载 -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="purchase-logs">
                        <div class="logs-container">
                            <h3>商品购买记录</h3>
                            <div class="logs-stats">
                                <div class="stat-card">
                                    <div class="stat-value" id="total-orders">0</div>
                                    <div class="stat-label">总订单数</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="unique-users-purchase">0</div>
                                    <div class="stat-label">购买用户数</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="total-amount">¥0</div>
                                    <div class="stat-label">总销售额</div>
                                </div>
                            </div>
                            <div class="table-container">
                                <table class="data-table" id="purchase-logs-table">
                                    <thead>
                                        <tr>
                                            <th>订单ID</th>
                                            <th>用户ID</th>
                                            <th>用户名</th>
                                            <th>商品</th>
                                            <th>类别</th>
                                            <th>单价</th>
                                            <th>数量</th>
                                            <th>总价</th>
                                            <th>购买时间</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- 购买日志将通过JS动态加载 -->
                                    </tbody>
                                </table>
                                <div class="loading-indicator" id="purchase-logs-loading">加载中...</div>
                                <div class="empty-message" id="purchase-logs-empty">没有符合条件的购买记录</div>
                            </div>
                            <div class="pagination" id="purchase-logs-pagination">
                                <!-- 分页控件将通过JS动态加载 -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="main-footer">
        <p>&copy; 2025 在线购物平台 | 所有权利保留</p>
    </footer>

    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/salesUtils.js"></script>
    <script src="js/salesProductLog.js"></script>
</body>
</html>